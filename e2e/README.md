# E2E 测试说明

本项目使用 Playwright 进行端到端测试，确保多语言路由和用户交互功能正常工作。

## 测试文件

### 1. `page-access.spec.js` - 页面访问测试
- **英文页面测试**：验证不带前缀的英文页面（如 `/`, `/blog`, `/about` 等）
- **中文页面测试**：验证带 `/zh-cn` 前缀的中文页面
- **动态路由测试**：验证博客文章和分类页面的访问
- **URL 结构验证**：确保英文页面不会重定向到 `/en` 前缀

### 2. `language-switch.spec.js` - 语言切换测试
- **页脚语言切换器**：测试从英文切换到中文，从中文切换到英文
- **页面上下文保持**：确保切换语言时保持当前页面上下文
- **移动端支持**：验证在移动设备上的语言切换功能
- **显示逻辑**：验证语言切换按钮的正确显示

### 3. `breadcrumb.spec.js` - 面包屑导航测试
- **英文面包屑**：验证英文页面的面包屑导航结构和链接
- **中文面包屑**：验证中文页面的面包屑导航结构和链接
- **链接验证**：确保面包屑链接的 `href` 属性正确
- **分隔符验证**：验证面包屑分隔符的正确显示

### 4. `routing.spec.js` - 路由测试
- **URL 结构**：验证英文和中文 URL 的正确结构
- **导航链接**：测试页面间的导航链接
- **动态路由**：验证博客文章和分类的动态路由
- **错误处理**：测试 404 页面的处理
- **SEO 和元标签**：验证页面标题和元标签的正确性

## 运行测试

### 运行所有测试
```bash
npm run test:e2e
```

### 运行特定测试文件
```bash
npm run test:e2e -- page-access.spec.js
```

### 运行特定测试
```bash
npm run test:e2e -- --grep "should load homepage"
```

### 以 UI 模式运行测试
```bash
npm run test:e2e:ui
```

### 以有头模式运行测试（显示浏览器）
```bash
npm run test:e2e:headed
```

### 调试模式
```bash
npm run test:e2e:debug
```

## 测试配置

- **浏览器支持**：Chromium、Firefox、WebKit、Mobile Chrome、Mobile Safari
- **基础 URL**：`http://localhost:3000`
- **自动启动开发服务器**：测试运行前会自动启动 `npm run dev`
- **并行执行**：测试在多个浏览器中并行运行

## 测试覆盖范围

✅ **页面访问**：所有静态和动态页面的访问
✅ **语言切换**：页脚语言切换器的功能
✅ **面包屑导航**：面包屑的结构和链接
✅ **路由结构**：URL 结构和导航
✅ **错误处理**：404 页面处理
✅ **SEO**：页面标题和元标签
✅ **移动端**：移动设备上的功能

## 注意事项

1. 测试运行前确保开发服务器正在运行（`npm run dev`）
2. 测试会自动启动开发服务器，但建议手动启动以确保稳定性
3. 测试覆盖了所有主要的多语言路由功能
4. 所有测试都验证了英文不带前缀、中文带 `/zh-cn` 前缀的 URL 结构
