{{ define "main" }}
  {{ $partial := print "home/" .Site.Params.homepage.layout ".html" }}
  {{ if templates.Exists ( printf "partials/%s" $partial ) }}
    {{ partial $partial . }}
  {{ else }}
    {{ partial "home/profile.html" . }}
  {{ end }}
  
  {{ $products := index .Site.Data (printf "products.%s" .Site.Language.Lang) }}
  {{ if not $products }}
    {{ $products = .Site.Data.products }}
  {{ end }}
  {{ if $products }}
  <section class="products-section mt-20">
    <div class="container">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold mb-10">{{ $products.title }}</h2>
        <p class="text-gray-600">{{ $products.subtitle }}</p>
      </div>
      
      <div class="products-grid-home">
        {{ range $products.items }}
        <a href="{{ .link }}" target="_blank" class="product-card-home">
          <div class="product-content-home">
            <div class="product-header-home">
              <img src="{{ .icon }}" alt="{{ .title }} icon" class="product-icon-home" 
                   onerror="this.onerror=null; this.src='{{ .link }}/favicon.ico'; this.onerror=function(){this.style.display='none'}">
              <h3 class="product-title-home">{{ .title }}</h3>
            </div>
            <p class="product-description-home">{{ .description }}</p>
            <p class="product-link-home">{{ .link }}</p>
          </div>
        </a>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}
{{ end }}
