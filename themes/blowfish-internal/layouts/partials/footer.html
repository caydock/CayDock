<footer id="site-footer" class="py-10 print:hidden">
  <div class="flex flex-col sm:flex-row items-center justify-between gap-4 sm:gap-0">
    {{/* Footer menu - mobile first, then copyright */}}
    {{ if .Site.Params.footer.showMenu | default true }}
      {{ if .Site.Menus.footer }}
        {{ $onlyIcon := true }}
        {{ range .Site.Menus.footer }}
          {{ if .Name }}
            {{ $onlyIcon = false }}
            {{ break }}
          {{ end }}
        {{ end }}
        {{ $navClass := printf "flex flex-row text-base font-medium text-neutral-500 dark:text-neutral-400 %s" (cond $onlyIcon "overflow-x-auto py-2" "") }}
        {{ $ulClass := printf "flex list-none flex-row gap-1 sm:gap-0 justify-center sm:justify-start" (cond $onlyIcon "flex-row" "") }}
        {{ $liClass := printf "flex justify-center sm:justify-start mb-0 ltr:mr-2 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:ml-2 rtl:sm:ml-7 rtl:sm:last:ml-0 %s" (cond $onlyIcon "ltr:mr-4 rtl:ml-4" "") }}
        <nav class="{{ $navClass }}">
          <ul class="{{ $ulClass }}">
            {{ range .Site.Menus.footer }}
              <li class=" {{ $liClass }}">
                <a
                  class="text-sm decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center justify-center sm:justify-start px-2 py-2 sm:px-3 rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors min-h-[44px] whitespace-nowrap"
                  href="{{ .URL }}"
                  title="{{ .Title }}">
                  {{ if .Pre }}
                    <span {{ if and .Pre .Name }}class="mr-0 sm:mr-2"{{ end }}>
                      {{ partial "icon.html" .Pre }}
                    </span>
                  {{ end }}
                  <span class="hidden sm:inline">{{ .Name | markdownify }}</span>
                </a>
              </li>
            {{ end }}
          </ul>
        </nav>
      {{ end }}
    {{ end }}

    {{/* Copyright */}}
    {{ if .Site.Params.footer.showCopyright | default true }}
      <p class="text-sm text-neutral-500 dark:text-neutral-400 text-center sm:text-left">
        {{- with replace .Site.Params.copyright "{ year }" now.Year }}
          {{ . | markdownify }}
        {{- else }}
          &copy;
          {{ now.Format "2006" }}
          {{ .Site.Params.Author.name | markdownify }}
        {{- end }}
      </p>
    {{ end }}

    {{/* Theme attribution */}}
    {{ if .Site.Params.footer.showThemeAttribution | default true }}
      <p class="text-xs text-neutral-500 dark:text-neutral-400 text-center sm:text-right">
        {{ $hugo := printf `<a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a>`
        }}
        {{ $blowfish := printf `<a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>`
        }}
        {{ i18n "footer.powered_by" (dict "Hugo" $hugo "Theme" $blowfish) | safeHTML }}
      </p>
    {{ end }}
  </div>
  {{ if not .Site.Params.disableImageZoom | default true }}
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  {{ end }}
  {{ $jsProcess := resources.Get "js/process.js" }}
  {{ $jsProcess = $jsProcess | resources.Minify | resources.Fingerprint (.Site.Params.fingerprintAlgorithm | default "sha512") }}
  <script
    type="text/javascript"
    src="{{ $jsProcess.RelPermalink }}"
    integrity="{{ $jsProcess.Data.Integrity }}"></script>
  {{/* Extend footer - eg. for extra scripts, etc. */}}
  {{ if templates.Exists "partials/extend-footer.html" }}
    {{ partialCached "extend-footer.html" . }}
  {{ end }}
</footer>
